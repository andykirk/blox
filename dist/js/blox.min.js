window.BLOX||(window.BLOX={settings:{default_type:"html",containers:{"one-up":{name:"One-up",icon:'<svg xmlns="http://www.w3.org/2000/svg" width="62" height="38" viewBox="0 0 62 38"  fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="1" y="1" fill="#ffffff" width="60" height="36" /></svg>',template:"<div data-blox-container><div data-blox-panel></div></div>"},"two-up":{name:"Two-up",icon:'<svg xmlns="http://www.w3.org/2000/svg" width="62" height="38" viewBox="0 0 62 38"  fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="1" y="1" fill="#ffffff" width="60" height="36" /><line x1="31" y1="1" x2="31" y2="37"/></svg>'},"three-up":{name:"Three-up",icon:'<svg xmlns="http://www.w3.org/2000/svg" width="62" height="38" viewBox="0 0 62 38"  fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="1" y="1" fill="#ffffff" width="60" height="36" /><line x1="21" y1="1" x2="21" y2="37"/><line x1="41" y1="1" x2="41" y2="37"/></svg>'},"float-left":{name:"Float left",icon:'<svg xmlns="http://www.w3.org/2000/svg" width="62" height="38" viewBox="0 0 62 38"  fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="1" y="1" fill="#ffffff" width="60" height="36" /><rect x="5" y="6" width="26" height="15"/><line x1="35" y1="6" x2="57" y2="6"/><line x1="35" y1="11" x2="57" y2="11"/><line x1="35" y1="16" x2="57" y2="16"/><line x1="35" y1="21" x2="57" y2="21"/><line x1="5" y1="26" x2="57" y2="26"/><line x1="5" y1="31" x2="57" y2="31"/></svg>'},"float-right":{name:"Float right",icon:'<svg xmlns="http://www.w3.org/2000/svg" width="62" height="38" viewBox="0 0 62 38"  fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="1" y="1" fill="#ffffff" width="60" height="36" /><rect x="31" y="5" width="26" height="16"/><line x1="5" y1="6" x2="27" y2="6"/><line x1="5" y1="11" x2="27" y2="11"/><line x1="5" y1="16" x2="27" y2="16"/><line x1="5" y1="21" x2="27" y2="21"/><line x1="5" y1="26" x2="57" y2="26"/><line x1="5" y1="31" x2="57" y2="31"/></svg>'}}},instances:[],editors:{},helpers:{}}),BLOX.containers={add:function(e,t){console.log(e),e="one-up";var n=BLOX.settings.containers[e];t.insertAdjacentHTML("afterend",n.template),BLOX.controls.add_container_options(t.nextElementSibling)},remove:function(){}},BLOX.controls={add_container_options:function(e){e.insertAdjacentHTML("afterend",'<div data-blox-controls><button aria-expanded="false">'+BLOX.icons.plus+" </button><div data-blox-container-options hidden></div></div>");var t=e.nextElementSibling.querySelector("[data-blox-controls] > button"),n=t.nextElementSibling;for(var o in BLOX.settings.containers){var i=BLOX.settings.containers[o],r=document.createElement("button");r.innerHTML=i.icon,r.setAttribute("data-blox-type",o),r.addEventListener("click",function(n){n.preventDefault(),BLOX.containers.add(this.getAttribute("data-blox-type"),e.nextElementSibling),t.click()}),n.appendChild(r)}t.addEventListener("click",function(e){e.preventDefault();var o="true"===t.getAttribute("aria-expanded")||!1;t.setAttribute("aria-expanded",!o),n.hidden=o})},add_panel_actions:function(e){console.log(e);var t='<button data-blox-action="done" data-blox-action-for="'+e.getAttribute("data-blox-type")+'">Done</button>';e.insertAdjacentHTML("beforeend",t),e.querySelector('[data-blox-action="done"]').addEventListener("click",function(e){e.preventDefault(),blox_type_editor=BLOX.editors[this.getAttribute("data-blox-action-for")],blox_type_editor.action_done(this)})},remove:function(){}},BLOX.helpers.parseHTML=function(e){var t=document.implementation.createHTMLDocument();return t.body.innerHTML=e,t.body.children},BLOX.icons={plus:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"> <line x1="12" y1="5" x2="12" y2="19" /> <line x1="5" y1="12" x2="19" y2="12" /></svg>'},BLOX.replace=function(e){console.log("Creating new Blox context");var t=document.querySelectorAll(e);Array.prototype.forEach.call(t,function(t,n){if("textarea"==t.tagName.toLowerCase()){t.style.display="none";var o=t.value,i=BLOX.helpers.parseHTML(o),r=!0;if(Array.prototype.forEach.call(i,function(e,t){var n=i[t].children;"div"==e.tagName.toLowerCase()&&e.hasAttribute("data-blox-container")?Array.prototype.forEach.call(n,function(e,t){"div"==e.tagName.toLowerCase()&&e.hasAttribute("data-blox-panel")||(r=!1)}):r=!1}),r)var a=i;else a=BLOX.helpers.parseHTML('<div data-blox-container><div data-blox-panel data-blox-type="'+BLOX.settings.default_type+'">'+o+"</div></div>");var l=document.createElement("div");l.setAttribute("data-blox-area",""),t.parentNode.insertBefore(l,t.nextSibling),l.appendChild(a[0]),blox_containers=l.querySelectorAll("[data-blox-container]"),Array.prototype.forEach.call(blox_containers,function(e,t){BLOX.controls.add_container_options(e);var n=l.querySelectorAll("[data-blox-panel]");Array.prototype.forEach.call(n,function(e,t){var n=e.getAttribute("data-blox-type");console.log(n),BLOX.editors[n].adapt(e),BLOX.controls.add_panel_actions(e)})})}else console.log("Can't attached BLOX to none textarea element:",t,"Selector was: '"+e+"'")})},BLOX.editors.html={adapt:function(e){"undefined"==typeof CKEDITOR&&console.error("CKEDITOR does not exist.");var t='<textarea id="flibble">'+e.innerHTML+"</textarea>";e.innerHTML=t;var n=e.querySelector("textarea");CKEDITOR.replace(n)},action_done:function(e){var t=e.previousElementSibling.getAttribute("id").replace("cke_",""),n=CKEDITOR.instances[t];console.log(n),n.updateElement(),console.log(document.getElementById("flibble").value)}};